<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Thu Apr 17 17:14:52 CST 2014 -->
<title>ZKDatabase</title>
<meta name="date" content="2014-04-17">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ZKDatabase";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ZKDatabase.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/zookeeper/server/WorkerService.WorkRequest.html" title="class in org.apache.zookeeper.server"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/zookeeper/server/ZooKeeperCriticalThread.html" title="class in org.apache.zookeeper.server"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/zookeeper/server/ZKDatabase.html" target="_top">Frames</a></li>
<li><a href="ZKDatabase.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.zookeeper.server</div>
<h2 title="Class ZKDatabase" class="title">Class ZKDatabase</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.zookeeper.server.ZKDatabase</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">ZKDatabase</span>
extends java.lang.Object</pre>
<div class="block">This class maintains the in memory database of zookeeper
 server states that includes the sessions, datatree and the
 committed logs. It is booted up  after reading the logs
 and snapshots from the disk.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#commitLogCount">commitLogCount</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#SNAPSHOT_SIZE_FACTOR">SNAPSHOT_SIZE_FACTOR</a></strong></code>
<div class="block">Default value is to use snapshot if txnlog size exceeds 1/3 the size of snapshot</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#ZKDatabase(org.apache.zookeeper.server.persistence.FileTxnSnapLog)">ZKDatabase</a></strong>(<a href="../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html" title="class in org.apache.zookeeper.server.persistence">FileTxnSnapLog</a>&nbsp;snapLog)</code>
<div class="block">the filetxnsnaplog that this zk database
 maps to.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#addCommittedProposal(org.apache.zookeeper.server.Request)">addCommittedProposal</a></strong>(<a href="../../../../org/apache/zookeeper/server/Request.html" title="class in org.apache.zookeeper.server">Request</a>&nbsp;request)</code>
<div class="block">maintains a list of last <i>committedLog</i>
  or so committed requests.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#append(org.apache.zookeeper.server.Request)">append</a></strong>(<a href="../../../../org/apache/zookeeper/server/Request.html" title="class in org.apache.zookeeper.server">Request</a>&nbsp;si)</code>
<div class="block">append to the underlying transaction log</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#calculateTxnLogSizeLimit()">calculateTxnLogSizeLimit</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#clear()">clear</a></strong>()</code>
<div class="block">clear the zkdatabase.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#close()">close</a></strong>()</code>
<div class="block">close this database.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#commit()">commit</a></strong>()</code>
<div class="block">commit to the underlying transaction log</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../org/apache/zookeeper/data/ACL.html" title="class in org.apache.zookeeper.data">ACL</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#convertLong(java.lang.Long)">convertLong</a></strong>(java.lang.Long&nbsp;aclL)</code>
<div class="block">convert from long to the acl entry</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#deserializeSnapshot(org.apache.jute.InputArchive)">deserializeSnapshot</a></strong>(<a href="../../../../org/apache/jute/InputArchive.html" title="interface in org.apache.jute">InputArchive</a>&nbsp;ia)</code>
<div class="block">deserialize a snapshot from an input archive</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#dumpEphemerals(java.io.PrintWriter)">dumpEphemerals</a></strong>(java.io.PrintWriter&nbsp;pwriter)</code>
<div class="block">write a text dump of all the ephemerals in the datatree</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../org/apache/zookeeper/data/ACL.html" title="class in org.apache.zookeeper.data">ACL</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getACL(java.lang.String, org.apache.zookeeper.data.Stat)">getACL</a></strong>(java.lang.String&nbsp;path,
      <a href="../../../../org/apache/zookeeper/data/Stat.html" title="class in org.apache.zookeeper.data">Stat</a>&nbsp;stat)</code>
<div class="block">get acl for a path</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getAclSize()">getAclSize</a></strong>()</code>
<div class="block">get the acl size of the datatree</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.List&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getChildren(java.lang.String, org.apache.zookeeper.data.Stat, org.apache.zookeeper.Watcher)">getChildren</a></strong>(java.lang.String&nbsp;path,
           <a href="../../../../org/apache/zookeeper/data/Stat.html" title="class in org.apache.zookeeper.data">Stat</a>&nbsp;stat,
           <a href="../../../../org/apache/zookeeper/Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</code>
<div class="block">get children list for this path</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../org/apache/zookeeper/server/quorum/Leader.Proposal.html" title="class in org.apache.zookeeper.server.quorum">Leader.Proposal</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getCommittedLog()">getCommittedLog</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getData(java.lang.String, org.apache.zookeeper.data.Stat, org.apache.zookeeper.Watcher)">getData</a></strong>(java.lang.String&nbsp;path,
       <a href="../../../../org/apache/zookeeper/data/Stat.html" title="class in org.apache.zookeeper.data">Stat</a>&nbsp;stat,
       <a href="../../../../org/apache/zookeeper/Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</code>
<div class="block">get data and stat for a path</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/apache/zookeeper/server/DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getDataTree()">getDataTree</a></strong>()</code>
<div class="block">the datatree for this zkdatabase</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getDataTreeLastProcessedZxid()">getDataTreeLastProcessedZxid</a></strong>()</code>
<div class="block">get the last processed zxid from a datatree</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.Set&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getEphemerals(long)">getEphemerals</a></strong>(long&nbsp;sessionId)</code>
<div class="block">the paths for  ephemeral session id</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.concurrent.locks.ReentrantReadWriteLock</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getLogLock()">getLogLock</a></strong>()</code>
<div class="block">Get the lock that controls the committedLog.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getmaxCommittedLog()">getmaxCommittedLog</a></strong>()</code>
<div class="block">the committed log for this zk database</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getminCommittedLog()">getminCommittedLog</a></strong>()</code>
<div class="block">the minimum committed transaction log
 available in memory</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/apache/zookeeper/server/DataNode.html" title="class in org.apache.zookeeper.server">DataNode</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getNode(java.lang.String)">getNode</a></strong>(java.lang.String&nbsp;path)</code>
<div class="block">get the datanode for this path</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getNodeCount()">getNodeCount</a></strong>()</code>
<div class="block">the node count of the datatree</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.Iterator&lt;<a href="../../../../org/apache/zookeeper/server/quorum/Leader.Proposal.html" title="class in org.apache.zookeeper.server.quorum">Leader.Proposal</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getProposalsFromTxnLog(long, long)">getProposalsFromTxnLog</a></strong>(long&nbsp;startZxid,
                      long&nbsp;sizeLimit)</code>
<div class="block">Get proposals from txnlog.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Collection&lt;java.lang.Long&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getSessions()">getSessions</a></strong>()</code>
<div class="block">return the sessions in the datatree</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.concurrent.ConcurrentHashMap&lt;java.lang.Long,java.lang.Integer&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getSessionWithTimeOuts()">getSessionWithTimeOuts</a></strong>()</code>
<div class="block">get sessions with timeouts</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#getSnapshotSizeFactor()">getSnapshotSizeFactor</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#initConfigInZKDatabase(org.apache.zookeeper.server.quorum.flexible.QuorumVerifier)">initConfigInZKDatabase</a></strong>(<a href="../../../../org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.html" title="interface in org.apache.zookeeper.server.quorum.flexible">QuorumVerifier</a>&nbsp;qv)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#isInitialized()">isInitialized</a></strong>()</code>
<div class="block">checks to see if the zk database has been
 initialized or not.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#isSpecialPath(java.lang.String)">isSpecialPath</a></strong>(java.lang.String&nbsp;path)</code>
<div class="block">check if the path is special or not</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#killSession(long, long)">killSession</a></strong>(long&nbsp;sessionId,
           long&nbsp;zxid)</code>
<div class="block">kill a given session in the datatree</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#loadDataBase()">loadDataBase</a></strong>()</code>
<div class="block">load the database from the disk onto memory and also add
 the transactions to the committedlog in memory.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../org/apache/zookeeper/server/DataTree.ProcessTxnResult.html" title="class in org.apache.zookeeper.server">DataTree.ProcessTxnResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#processTxn(org.apache.zookeeper.txn.TxnHeader, org.apache.jute.Record)">processTxn</a></strong>(<a href="../../../../org/apache/zookeeper/txn/TxnHeader.html" title="class in org.apache.zookeeper.txn">TxnHeader</a>&nbsp;hdr,
          <a href="../../../../org/apache/jute/Record.html" title="interface in org.apache.jute">Record</a>&nbsp;txn)</code>
<div class="block">the process txn on the data</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#removeCnxn(org.apache.zookeeper.server.ServerCnxn)">removeCnxn</a></strong>(<a href="../../../../org/apache/zookeeper/server/ServerCnxn.html" title="class in org.apache.zookeeper.server">ServerCnxn</a>&nbsp;cnxn)</code>
<div class="block">remove a cnxn from the datatree</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#removeWatch(java.lang.String, org.apache.zookeeper.Watcher.WatcherType, org.apache.zookeeper.Watcher)">removeWatch</a></strong>(java.lang.String&nbsp;path,
           <a href="../../../../org/apache/zookeeper/Watcher.WatcherType.html" title="enum in org.apache.zookeeper">Watcher.WatcherType</a>&nbsp;type,
           <a href="../../../../org/apache/zookeeper/Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</code>
<div class="block">Remove watch from the datatree</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#rollLog()">rollLog</a></strong>()</code>
<div class="block">roll the underlying log</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#serializeSnapshot(org.apache.jute.OutputArchive)">serializeSnapshot</a></strong>(<a href="../../../../org/apache/jute/OutputArchive.html" title="interface in org.apache.jute">OutputArchive</a>&nbsp;oa)</code>
<div class="block">serialize the snapshot</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#setlastProcessedZxid(long)">setlastProcessedZxid</a></strong>(long&nbsp;zxid)</code>
<div class="block">the last processed zxid in the datatree</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#setSnapshotSizeFactor(double)">setSnapshotSizeFactor</a></strong>(double&nbsp;snapshotSizeFactor)</code>
<div class="block">Use for unit testing, so we can turn this feature on/off</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#setWatches(long, java.util.List, java.util.List, java.util.List, org.apache.zookeeper.Watcher)">setWatches</a></strong>(long&nbsp;relativeZxid,
          java.util.List&lt;java.lang.String&gt;&nbsp;dataWatches,
          java.util.List&lt;java.lang.String&gt;&nbsp;existWatches,
          java.util.List&lt;java.lang.String&gt;&nbsp;childWatches,
          <a href="../../../../org/apache/zookeeper/Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</code>
<div class="block">set watches on the datatree</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../org/apache/zookeeper/data/Stat.html" title="class in org.apache.zookeeper.data">Stat</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#statNode(java.lang.String, org.apache.zookeeper.server.ServerCnxn)">statNode</a></strong>(java.lang.String&nbsp;path,
        <a href="../../../../org/apache/zookeeper/server/ServerCnxn.html" title="class in org.apache.zookeeper.server">ServerCnxn</a>&nbsp;serverCnxn)</code>
<div class="block">stat the path</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html#truncateLog(long)">truncateLog</a></strong>(long&nbsp;zxid)</code>
<div class="block">Truncate the ZKDatabase to the specified zxid</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="SNAPSHOT_SIZE_FACTOR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SNAPSHOT_SIZE_FACTOR</h4>
<pre>public static final&nbsp;java.lang.String SNAPSHOT_SIZE_FACTOR</pre>
<div class="block">Default value is to use snapshot if txnlog size exceeds 1/3 the size of snapshot</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.zookeeper.server.ZKDatabase.SNAPSHOT_SIZE_FACTOR">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="commitLogCount">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>commitLogCount</h4>
<pre>public static final&nbsp;int commitLogCount</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.zookeeper.server.ZKDatabase.commitLogCount">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ZKDatabase(org.apache.zookeeper.server.persistence.FileTxnSnapLog)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ZKDatabase</h4>
<pre>public&nbsp;ZKDatabase(<a href="../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html" title="class in org.apache.zookeeper.server.persistence">FileTxnSnapLog</a>&nbsp;snapLog)</pre>
<div class="block">the filetxnsnaplog that this zk database
 maps to. There is a one to one relationship
 between a filetxnsnaplog and zkdatabase.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>snapLog</code> - the FileTxnSnapLog mapping this zkdatabase</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="isInitialized()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isInitialized</h4>
<pre>public&nbsp;boolean&nbsp;isInitialized()</pre>
<div class="block">checks to see if the zk database has been
 initialized or not.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if zk database is initialized and false if not</dd></dl>
</li>
</ul>
<a name="clear()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;clear()</pre>
<div class="block">clear the zkdatabase.
 Note to developers - be careful to see that
 the clear method does clear out all the
 data structures in zkdatabase.</div>
</li>
</ul>
<a name="getDataTree()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDataTree</h4>
<pre>public&nbsp;<a href="../../../../org/apache/zookeeper/server/DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a>&nbsp;getDataTree()</pre>
<div class="block">the datatree for this zkdatabase</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the datatree for this zkdatabase</dd></dl>
</li>
</ul>
<a name="getmaxCommittedLog()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getmaxCommittedLog</h4>
<pre>public&nbsp;long&nbsp;getmaxCommittedLog()</pre>
<div class="block">the committed log for this zk database</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the committed log for this zkdatabase</dd></dl>
</li>
</ul>
<a name="getminCommittedLog()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getminCommittedLog</h4>
<pre>public&nbsp;long&nbsp;getminCommittedLog()</pre>
<div class="block">the minimum committed transaction log
 available in memory</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the minimum committed transaction
 log available in memory</dd></dl>
</li>
</ul>
<a name="getLogLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogLock</h4>
<pre>public&nbsp;java.util.concurrent.locks.ReentrantReadWriteLock&nbsp;getLogLock()</pre>
<div class="block">Get the lock that controls the committedLog. If you want to get the pointer to the committedLog, you need
 to use this lock to acquire a read lock before calling getCommittedLog()</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the lock that controls the committed log</dd></dl>
</li>
</ul>
<a name="getCommittedLog()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCommittedLog</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../org/apache/zookeeper/server/quorum/Leader.Proposal.html" title="class in org.apache.zookeeper.server.quorum">Leader.Proposal</a>&gt;&nbsp;getCommittedLog()</pre>
</li>
</ul>
<a name="getDataTreeLastProcessedZxid()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDataTreeLastProcessedZxid</h4>
<pre>public&nbsp;long&nbsp;getDataTreeLastProcessedZxid()</pre>
<div class="block">get the last processed zxid from a datatree</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the last processed zxid of a datatree</dd></dl>
</li>
</ul>
<a name="getSessions()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSessions</h4>
<pre>public&nbsp;java.util.Collection&lt;java.lang.Long&gt;&nbsp;getSessions()</pre>
<div class="block">return the sessions in the datatree</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the data tree sessions</dd></dl>
</li>
</ul>
<a name="getSessionWithTimeOuts()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSessionWithTimeOuts</h4>
<pre>public&nbsp;java.util.concurrent.ConcurrentHashMap&lt;java.lang.Long,java.lang.Integer&gt;&nbsp;getSessionWithTimeOuts()</pre>
<div class="block">get sessions with timeouts</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the hashmap of sessions with timeouts</dd></dl>
</li>
</ul>
<a name="loadDataBase()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadDataBase</h4>
<pre>public&nbsp;long&nbsp;loadDataBase()
                  throws java.io.IOException</pre>
<div class="block">load the database from the disk onto memory and also add
 the transactions to the committedlog in memory.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the last valid zxid on disk</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="addCommittedProposal(org.apache.zookeeper.server.Request)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addCommittedProposal</h4>
<pre>public&nbsp;void&nbsp;addCommittedProposal(<a href="../../../../org/apache/zookeeper/server/Request.html" title="class in org.apache.zookeeper.server">Request</a>&nbsp;request)</pre>
<div class="block">maintains a list of last <i>committedLog</i>
  or so committed requests. This is used for
 fast follower synchronization.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>request</code> - committed request</dd></dl>
</li>
</ul>
<a name="getSnapshotSizeFactor()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSnapshotSizeFactor</h4>
<pre>public&nbsp;double&nbsp;getSnapshotSizeFactor()</pre>
</li>
</ul>
<a name="calculateTxnLogSizeLimit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateTxnLogSizeLimit</h4>
<pre>public&nbsp;long&nbsp;calculateTxnLogSizeLimit()</pre>
</li>
</ul>
<a name="getProposalsFromTxnLog(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProposalsFromTxnLog</h4>
<pre>public&nbsp;java.util.Iterator&lt;<a href="../../../../org/apache/zookeeper/server/quorum/Leader.Proposal.html" title="class in org.apache.zookeeper.server.quorum">Leader.Proposal</a>&gt;&nbsp;getProposalsFromTxnLog(long&nbsp;startZxid,
                                                         long&nbsp;sizeLimit)</pre>
<div class="block">Get proposals from txnlog. Only packet part of proposal is populated.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>startZxid</code> - the starting zxid of the proposal</dd><dd><code>sizeLimit</code> - maximum on-disk size of txnlog to fetch
                  0 is unlimited, negative value means disable.</dd>
<dt><span class="strong">Returns:</span></dt><dd>list of proposal (request part of each proposal is null)</dd></dl>
</li>
</ul>
<a name="removeCnxn(org.apache.zookeeper.server.ServerCnxn)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeCnxn</h4>
<pre>public&nbsp;void&nbsp;removeCnxn(<a href="../../../../org/apache/zookeeper/server/ServerCnxn.html" title="class in org.apache.zookeeper.server">ServerCnxn</a>&nbsp;cnxn)</pre>
<div class="block">remove a cnxn from the datatree</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cnxn</code> - the cnxn to remove from the datatree</dd></dl>
</li>
</ul>
<a name="killSession(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>killSession</h4>
<pre>public&nbsp;void&nbsp;killSession(long&nbsp;sessionId,
               long&nbsp;zxid)</pre>
<div class="block">kill a given session in the datatree</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - the session id to be killed</dd><dd><code>zxid</code> - the zxid of kill session transaction</dd></dl>
</li>
</ul>
<a name="dumpEphemerals(java.io.PrintWriter)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dumpEphemerals</h4>
<pre>public&nbsp;void&nbsp;dumpEphemerals(java.io.PrintWriter&nbsp;pwriter)</pre>
<div class="block">write a text dump of all the ephemerals in the datatree</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>pwriter</code> - the output to write to</dd></dl>
</li>
</ul>
<a name="getNodeCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNodeCount</h4>
<pre>public&nbsp;int&nbsp;getNodeCount()</pre>
<div class="block">the node count of the datatree</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the node count of datatree</dd></dl>
</li>
</ul>
<a name="getEphemerals(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEphemerals</h4>
<pre>public&nbsp;java.util.Set&lt;java.lang.String&gt;&nbsp;getEphemerals(long&nbsp;sessionId)</pre>
<div class="block">the paths for  ephemeral session id</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - the session id for which paths match to</dd>
<dt><span class="strong">Returns:</span></dt><dd>the paths for a session id</dd></dl>
</li>
</ul>
<a name="setlastProcessedZxid(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setlastProcessedZxid</h4>
<pre>public&nbsp;void&nbsp;setlastProcessedZxid(long&nbsp;zxid)</pre>
<div class="block">the last processed zxid in the datatree</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>zxid</code> - the last processed zxid in the datatree</dd></dl>
</li>
</ul>
<a name="processTxn(org.apache.zookeeper.txn.TxnHeader, org.apache.jute.Record)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processTxn</h4>
<pre>public&nbsp;<a href="../../../../org/apache/zookeeper/server/DataTree.ProcessTxnResult.html" title="class in org.apache.zookeeper.server">DataTree.ProcessTxnResult</a>&nbsp;processTxn(<a href="../../../../org/apache/zookeeper/txn/TxnHeader.html" title="class in org.apache.zookeeper.txn">TxnHeader</a>&nbsp;hdr,
                                   <a href="../../../../org/apache/jute/Record.html" title="interface in org.apache.jute">Record</a>&nbsp;txn)</pre>
<div class="block">the process txn on the data</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>hdr</code> - the txnheader for the txn</dd><dd><code>txn</code> - the transaction that needs to be processed</dd>
<dt><span class="strong">Returns:</span></dt><dd>the result of processing the transaction on this
 datatree/zkdatabase</dd></dl>
</li>
</ul>
<a name="statNode(java.lang.String, org.apache.zookeeper.server.ServerCnxn)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>statNode</h4>
<pre>public&nbsp;<a href="../../../../org/apache/zookeeper/data/Stat.html" title="class in org.apache.zookeeper.data">Stat</a>&nbsp;statNode(java.lang.String&nbsp;path,
            <a href="../../../../org/apache/zookeeper/server/ServerCnxn.html" title="class in org.apache.zookeeper.server">ServerCnxn</a>&nbsp;serverCnxn)
              throws <a href="../../../../org/apache/zookeeper/KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></pre>
<div class="block">stat the path</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>path</code> - the path for which stat is to be done</dd><dd><code>serverCnxn</code> - the servercnxn attached to this request</dd>
<dt><span class="strong">Returns:</span></dt><dd>the stat of this node</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>KeeperException.NoNodeException</code></dd></dl>
</li>
</ul>
<a name="getNode(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNode</h4>
<pre>public&nbsp;<a href="../../../../org/apache/zookeeper/server/DataNode.html" title="class in org.apache.zookeeper.server">DataNode</a>&nbsp;getNode(java.lang.String&nbsp;path)</pre>
<div class="block">get the datanode for this path</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>path</code> - the path to lookup</dd>
<dt><span class="strong">Returns:</span></dt><dd>the datanode for getting the path</dd></dl>
</li>
</ul>
<a name="convertLong(java.lang.Long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>convertLong</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../org/apache/zookeeper/data/ACL.html" title="class in org.apache.zookeeper.data">ACL</a>&gt;&nbsp;convertLong(java.lang.Long&nbsp;aclL)</pre>
<div class="block">convert from long to the acl entry</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>aclL</code> - the long for which to get the acl</dd>
<dt><span class="strong">Returns:</span></dt><dd>the acl corresponding to this long entry</dd></dl>
</li>
</ul>
<a name="getData(java.lang.String, org.apache.zookeeper.data.Stat, org.apache.zookeeper.Watcher)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getData</h4>
<pre>public&nbsp;byte[]&nbsp;getData(java.lang.String&nbsp;path,
             <a href="../../../../org/apache/zookeeper/data/Stat.html" title="class in org.apache.zookeeper.data">Stat</a>&nbsp;stat,
             <a href="../../../../org/apache/zookeeper/Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)
               throws <a href="../../../../org/apache/zookeeper/KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></pre>
<div class="block">get data and stat for a path</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>path</code> - the path being queried</dd><dd><code>stat</code> - the stat for this path</dd><dd><code>watcher</code> - the watcher function</dd>
<dt><span class="strong">Returns:</span></dt><dd></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>KeeperException.NoNodeException</code></dd></dl>
</li>
</ul>
<a name="setWatches(long, java.util.List, java.util.List, java.util.List, org.apache.zookeeper.Watcher)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setWatches</h4>
<pre>public&nbsp;void&nbsp;setWatches(long&nbsp;relativeZxid,
              java.util.List&lt;java.lang.String&gt;&nbsp;dataWatches,
              java.util.List&lt;java.lang.String&gt;&nbsp;existWatches,
              java.util.List&lt;java.lang.String&gt;&nbsp;childWatches,
              <a href="../../../../org/apache/zookeeper/Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</pre>
<div class="block">set watches on the datatree</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>relativeZxid</code> - the relative zxid that client has seen</dd><dd><code>dataWatches</code> - the data watches the client wants to reset</dd><dd><code>existWatches</code> - the exists watches the client wants to reset</dd><dd><code>childWatches</code> - the child watches the client wants to reset</dd><dd><code>watcher</code> - the watcher function</dd></dl>
</li>
</ul>
<a name="getACL(java.lang.String, org.apache.zookeeper.data.Stat)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getACL</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../org/apache/zookeeper/data/ACL.html" title="class in org.apache.zookeeper.data">ACL</a>&gt;&nbsp;getACL(java.lang.String&nbsp;path,
                         <a href="../../../../org/apache/zookeeper/data/Stat.html" title="class in org.apache.zookeeper.data">Stat</a>&nbsp;stat)
                           throws <a href="../../../../org/apache/zookeeper/KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></pre>
<div class="block">get acl for a path</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>path</code> - the path to query for acl</dd><dd><code>stat</code> - the stat for the node</dd>
<dt><span class="strong">Returns:</span></dt><dd>the acl list for this path</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/zookeeper/KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></code></dd></dl>
</li>
</ul>
<a name="getChildren(java.lang.String, org.apache.zookeeper.data.Stat, org.apache.zookeeper.Watcher)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getChildren</h4>
<pre>public&nbsp;java.util.List&lt;java.lang.String&gt;&nbsp;getChildren(java.lang.String&nbsp;path,
                                           <a href="../../../../org/apache/zookeeper/data/Stat.html" title="class in org.apache.zookeeper.data">Stat</a>&nbsp;stat,
                                           <a href="../../../../org/apache/zookeeper/Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)
                                             throws <a href="../../../../org/apache/zookeeper/KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></pre>
<div class="block">get children list for this path</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>path</code> - the path of the node</dd><dd><code>stat</code> - the stat of the node</dd><dd><code>watcher</code> - the watcher function for this path</dd>
<dt><span class="strong">Returns:</span></dt><dd>the list of children for this path</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>KeeperException.NoNodeException</code></dd></dl>
</li>
</ul>
<a name="isSpecialPath(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isSpecialPath</h4>
<pre>public&nbsp;boolean&nbsp;isSpecialPath(java.lang.String&nbsp;path)</pre>
<div class="block">check if the path is special or not</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>path</code> - the input path</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if path is special and false if not</dd></dl>
</li>
</ul>
<a name="getAclSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAclSize</h4>
<pre>public&nbsp;int&nbsp;getAclSize()</pre>
<div class="block">get the acl size of the datatree</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the acl size of the datatree</dd></dl>
</li>
</ul>
<a name="truncateLog(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>truncateLog</h4>
<pre>public&nbsp;boolean&nbsp;truncateLog(long&nbsp;zxid)
                    throws java.io.IOException</pre>
<div class="block">Truncate the ZKDatabase to the specified zxid</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>zxid</code> - the zxid to truncate zk database to</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the truncate is successful and false if not</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="deserializeSnapshot(org.apache.jute.InputArchive)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deserializeSnapshot</h4>
<pre>public&nbsp;void&nbsp;deserializeSnapshot(<a href="../../../../org/apache/jute/InputArchive.html" title="interface in org.apache.jute">InputArchive</a>&nbsp;ia)
                         throws java.io.IOException</pre>
<div class="block">deserialize a snapshot from an input archive</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ia</code> - the input archive you want to deserialize from</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="serializeSnapshot(org.apache.jute.OutputArchive)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serializeSnapshot</h4>
<pre>public&nbsp;void&nbsp;serializeSnapshot(<a href="../../../../org/apache/jute/OutputArchive.html" title="interface in org.apache.jute">OutputArchive</a>&nbsp;oa)
                       throws java.io.IOException,
                              java.lang.InterruptedException</pre>
<div class="block">serialize the snapshot</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>oa</code> - the output archive to which the snapshot needs to be serialized</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>java.lang.InterruptedException</code></dd></dl>
</li>
</ul>
<a name="append(org.apache.zookeeper.server.Request)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>append</h4>
<pre>public&nbsp;boolean&nbsp;append(<a href="../../../../org/apache/zookeeper/server/Request.html" title="class in org.apache.zookeeper.server">Request</a>&nbsp;si)
               throws java.io.IOException</pre>
<div class="block">append to the underlying transaction log</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>si</code> - the request to append</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the append was succesfull and false if not</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="rollLog()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollLog</h4>
<pre>public&nbsp;void&nbsp;rollLog()
             throws java.io.IOException</pre>
<div class="block">roll the underlying log</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="commit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>public&nbsp;void&nbsp;commit()
            throws java.io.IOException</pre>
<div class="block">commit to the underlying transaction log</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws java.io.IOException</pre>
<div class="block">close this database. free the resources</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="initConfigInZKDatabase(org.apache.zookeeper.server.quorum.flexible.QuorumVerifier)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initConfigInZKDatabase</h4>
<pre>public&nbsp;void&nbsp;initConfigInZKDatabase(<a href="../../../../org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.html" title="interface in org.apache.zookeeper.server.quorum.flexible">QuorumVerifier</a>&nbsp;qv)</pre>
</li>
</ul>
<a name="setSnapshotSizeFactor(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSnapshotSizeFactor</h4>
<pre>public&nbsp;void&nbsp;setSnapshotSizeFactor(double&nbsp;snapshotSizeFactor)</pre>
<div class="block">Use for unit testing, so we can turn this feature on/off</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>snapshotSizeFactor</code> - Set to minus value to turn this off.</dd></dl>
</li>
</ul>
<a name="removeWatch(java.lang.String, org.apache.zookeeper.Watcher.WatcherType, org.apache.zookeeper.Watcher)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>removeWatch</h4>
<pre>public&nbsp;boolean&nbsp;removeWatch(java.lang.String&nbsp;path,
                  <a href="../../../../org/apache/zookeeper/Watcher.WatcherType.html" title="enum in org.apache.zookeeper">Watcher.WatcherType</a>&nbsp;type,
                  <a href="../../../../org/apache/zookeeper/Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</pre>
<div class="block">Remove watch from the datatree</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>path</code> - node to remove watches from</dd><dd><code>type</code> - type of watcher to remove</dd><dd><code>watcher</code> - watcher function to remove</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ZKDatabase.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/zookeeper/server/WorkerService.WorkRequest.html" title="class in org.apache.zookeeper.server"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/zookeeper/server/ZooKeeperCriticalThread.html" title="class in org.apache.zookeeper.server"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/zookeeper/server/ZKDatabase.html" target="_top">Frames</a></li>
<li><a href="ZKDatabase.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
